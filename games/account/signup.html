<script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-analytics.js"></script>
<div id="app">
    <h1 style= "text-align: center; font-family: impact; color: white;">Proton SignUp</h1>
    <input style=" display: block; margin-left: auto; margin-right: auto;" type="email" id="email" placeholder="Email">
    <br>
    <input style=" display: block; margin-left: auto; margin-right: auto;" type="password" id="password" placeholder="Password">
    <br>
    <button style="background-color: #007bff; color: white; border-radius: 5px; padding: 10px 20px; display: block; margin-left: auto; margin-right: auto;" type="button" id="signup" onclick="signup()">Sign Up</button>
    <br>
    <br>
    <br>
    <a style= "text-align: center; color: white; font-family: impact; display: block; margin-left: auto; margin-right: auto;" hr<button class="btn btn-primary" onclick="window.location.href='https://gshaffer312.github.io/AuroraGames/LS/login.html'">Have a account? Login!</button>
    </a>
  </div>
  <script>
 
  const firebaseConfig = {
    apiKey: "AIzaSyAM4SyWnRmHNQgeaLPStwESVqhHiKy-Q2s",
    authDomain: "maximal-park-420917.firebaseapp.com",
    projectId: "maximal-park-420917",
    storageBucket: "maximal-park-420917.appspot.com",
    messagingSenderId: "539718084378",
    appId: "1:539718084378:web:4b2ee83c0b6d312cc42ea3",
    measurementId: "G-5D19CXJYBB"
  };

    firebase.initializeApp(firebaseConfig);
   const analytics = getAnalytics(app);
    
    function saveLoginSession(uid) {
      localStorage.setItem('login_user_uid', uid);
    }

    
    function loadLoginSession() {
      const uid = localStorage.getItem('login_user_uid');
      if (!uid) {
        saveLoginSession('');
      }
    
      return uid;
    }

    function signup() {
      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;

      if (!email.match(/^[^@]+@[^@]+\.[^@]+$/)) {
        alert("Invalid email address");
        return;
      }
      if (password.length < 6) {
        alert("Password must be at least 6 characters long");
        return;
      }

      // Create the user
      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then(function(user) {
          alert("Successfully Logged in!")

          saveLoginSession(user.user.uid);

          const userRef = firebase.database().ref('users/' + user.user.uid);
          userRef.set({
            email: email,
          });

    

        })
        .catch(function(error) {
 
          alert(error.message);
        });
    }


    if (!loadLoginSession()) {
      saveLoginSession('');
    }


    const uid = loadLoginSession();
    if (uid) {
      // The user is logged in.
      // Use the `uid` variable in your code.
    } else {
      // The user is not logged in.
      // Display an error message or redirect the user to the login page.
    }
</script>

<style>
  input type="text" {
  width: 300px;
  height: 175px;
}
</style>
